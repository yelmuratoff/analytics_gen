name: Format check

on:
   pull_request:
      branches: [main]

jobs:
   dart-format-check:
      runs-on: ubuntu-latest
      steps:
         - name: Checkout repository
           uses: actions/checkout@v4

         - name: Set up Dart
           uses: dart-lang/setup-dart@v1
           with:
              sdk: stable

         - name: Cache pub dependencies
           uses: actions/cache@v4
           with:
              path: ~/.pub-cache
              key: ${{ runner.os }}-pub-stable-${{ hashFiles('**/pubspec.lock') }}
              restore-keys: |
                 ${{ runner.os }}-pub-stable-
                 ${{ runner.os }}-pub-

         - name: Get dependencies
           run: dart pub get

         - name: Check dart format
           run: dart format --output=none --set-exit-if-changed .
